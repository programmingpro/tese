(async()=>{try{const r=await fetch('/docs-v2',{credentials:'include'}),t=await r.text(),p=new DOMParser(),d=p.parseFromString(t,'text/html'),a=d.querySelector('input[name="action"][value="new-api-key"]'),c=d.querySelector('input[name="_csrf"]');if(!a||!c)throw new Error('inputs not found');const b=new URLSearchParams({action:'new-api-key',_csrf:c.value}).toString(),r2=await fetch('/docs-v2',{method:'POST',credentials:'include',headers:{'Content-Type':'application/x-www-form-urlencoded','Origin':location.origin,'Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','User-Agent':navigator.userAgent},body:b}),h=await r2.text(),d2=p.parseFromString(h,'text/html'),f=[...d2.querySelectorAll('.cat-block')].find(b=>{const n=b.querySelector('.cat-name');return n&&n.textContent.trim()==='Ваш API ключ готов!'});if(!f)return console.log('block not found');const k=f.querySelector('p.col0');if(!k)return console.log('key not found');alert('API Key: '+k.textContent.trim())}catch(e){console.error(e)}})();
